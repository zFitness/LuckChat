(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app"],{0:function(e,t,n){e.exports=n("56d7")},"259b":function(e,t){e.exports={title:"chat",baseUrl:"http://localhost:9020",baseApi:"/api",APPID:"xxx",APPSECRET:"xxx",$cdn:"https://www.sunniejs.cn/static"}},4360:function(e,t,n){"use strict";var r=n("2b0e"),a=n("2f62"),o={userName:function(e){return e.app.userName},userInfo:function(e){return e.user.userInfo},loginStatus:function(e){return e.user.loginStatus}},u=o,c={userName:""},i={SET_USER_NAME:function(e,t){e.userName=t}},s={setUserName:function(e,t){var n=e.commit;n("SET_USER_NAME",t)}},f={state:c,mutations:i,actions:s},p=(n("d3b7"),n("a78e"),n("335a")),l="Login-Status",d="Access-Token",h="User-Info";function m(){return p["a"].get(l)||0}function b(e){return p["a"].set(l,e),e}function v(){return p["a"].remove(l),""}function g(){return p["a"].get(d,"")}function x(e){return p["a"].set(d,e),e}function w(){return p["a"].remove(d),""}function k(){return p["a"].get(h,{})}function S(e){return p["a"].set(h,e),e}function E(){return p["a"].remove(h),{}}n("e7e5");var A=n("d399"),T=n("bc3a"),P=n.n(T),I=n("f121"),N=P.a.create({baseURL:I["baseApi"],withCredentials:!0,timeout:5e3});N.interceptors.request.use((function(e){return e.hideloading||A["a"].loading({forbidClick:!0}),D.getters.token&&(e.headers["X-Token"]=""),e}),(function(e){return Promise.reject(e)})),N.interceptors.response.use((function(e){A["a"].clear();var t=e.data;return t.status&&200!==t.status?(401===t.status&&D.dispatch("FedLogOut").then((function(){location.reload()})),Promise.reject(t||"error")):Promise.resolve(t)}),(function(e){return A["a"].clear(),Promise.reject(e)}));var O=N;function U(e){return O({url:"/user/register",method:"post",data:e})}var $={loginStatus:m(),token:g(),userInfo:k()},_={SET_USERINFO:function(e,t){e.userInfo=t},SET_LOGIN_STATUS:function(e,t){e.loginStatus=t},SET_TOKEN:function(e,t){e.token=t}},R={registerUser:function(e,t){var n=e.commit,r=e.dispatch;return new Promise((function(e,a){U(t).then((function(t){r("setLoginStatus",1),n("SET_USERINFO",S(t.data.userInfo)),n("SET_TOKEN",x("xxx")),e("success")})).catch((function(e){a(e)}))}))},setLoginStatus:function(e,t){var n=e.commit;0!==t&&1!==t||(w(),E()),n("SET_LOGIN_STATUS",b(t))},fedLogOut:function(){w(),E(),v()}},j={namespaced:!0,state:$,mutations:_,actions:R};r["a"].use(a["a"]);var y=new a["a"].Store({modules:{app:f,user:j},getters:u}),D=t["a"]=y},"56d7":function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"formatDate",(function(){return y})),n.d(r,"hidePhone",(function(){return L}));n("e623"),n("e379"),n("5dc8"),n("37e1"),n("2d26"),n("96cf");var a=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},u=[],c=n("4360"),i={name:"App",methods:{localSocket:function(){var e=this;"WebSocket"in window&&(e.ws=new WebSocket("ws://localhost:8099/chat/".concat(c["a"].getters.userInfo.id)),e.$global.setWs(e.ws),e.ws.onopen=function(){},e.ws.onclose=function(){setTimeout((function(){e.localSocket()}),2e3)})}},created:function(){void 0==c["a"].getters.userInfo.id&&null==c["a"].getters.userInfo.id||this.localSocket()}},s=i,f=(n("5c0b"),n("2877")),p=Object(f["a"])(s,o,u,!1,null,null,null),l=p.exports,d=n("8c4f"),h=(n("d3b7"),[{path:"/",component:function(){return n.e("chunk-05c3bfe4").then(n.bind(null,"7431"))},redirect:"/home",meta:{title:"首页",keepAlive:!1},children:[{path:"/home",name:"Home",component:function(){return n.e("chunk-7e2d2a80").then(n.bind(null,"7abe"))},meta:{title:"首页",keepAlive:!1}},{path:"/profile",name:"Profile",component:function(){return n.e("chunk-400f0024").then(n.bind(null,"ecac"))},meta:{title:"关于我",keepAlive:!1}}]},{path:"/profile",component:function(){return n.e("chunk-400f0024").then(n.bind(null,"ecac"))},meta:{title:"关于我",keepAlive:!1}},{path:"/chat/:id",component:function(){return n.e("chunk-656e6f14").then(n.bind(null,"6f29"))},meta:{title:"聊天",keepAlive:!1}},{path:"/register",component:function(){return n.e("chunk-153e5ae3").then(n.bind(null,"d5c2"))},meta:{title:"注册",keepAlive:!1}},{path:"/match",component:function(){return n.e("chunk-36ef8743").then(n.bind(null,"4ab8"))},meta:{title:"匹配",keepAlive:!1}}]),m=d["a"].prototype.push;d["a"].prototype.push=function(e,t,n){return t||n?m.call(this,e,t,n):m.call(this,e).catch((function(e){return e}))},a["a"].use(d["a"]);var b=function(){return new d["a"]({scrollBehavior:function(){return{y:0}},routes:h})},v=b();var g=v,x=n("f121"),w=(n("a44c"),n("e27c")),k=(n("4ddd"),n("9f14")),S=(n("0653"),n("34e9")),E=(n("537a"),n("ac28")),A=(n("a52c"),n("2ed4")),T=(n("4056"),n("44bf")),P=(n("be7f"),n("565f")),I=(n("5246"),n("6b41")),N=(n("c3a6"),n("ad06")),O=(n("2994"),n("2bdd")),U=(n("c194"),n("7744")),$=(n("66b9"),n("b650"));a["a"].use($["a"]),a["a"].use(U["a"]),a["a"].use(O["a"]),a["a"].use(N["a"]),a["a"].use(I["a"]),a["a"].use(P["a"]),a["a"].use(T["a"]),a["a"].use(E["a"]).use(A["a"]),a["a"].use(U["a"]).use(S["a"]),a["a"].use(k["a"]),a["a"].use(w["a"]);n("9536"),n("499a"),n("be35"),n("c975"),n("a9e3");var _=n("c964"),R=(n("4328"),["/404","/register"]);g.beforeEach(function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(t,n,r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(-1===R.indexOf(t.path)){e.next=2;break}return e.abrupt("return",r());case 2:a=c["a"].getters.loginStatus,e.t0=Number(a),e.next=0===e.t0?6:1===e.t0?8:10;break;case 6:return r("/register"),e.abrupt("break",12);case 8:return r(),e.abrupt("break",12);case 10:return r(),e.abrupt("break",12);case 12:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}());var j={ws:{},setWs:function(e){this.ws=e}};n("4de4"),n("4160"),n("b64b"),n("159b"),n("4d63"),n("ac1f"),n("25f0"),n("5319");function y(e,t){if(void 0!==e){var n=new Date(e);/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length)));var r={"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds()};for(var a in r)if(new RegExp("(".concat(a,")")).test(t)){var o=r[a]+"";t=t.replace(RegExp.$1,1===RegExp.$1.length?o:D(o))}return t}}function D(e){return("00"+e).substr(e.length)}function L(e){return e.replace(/(\d{3})\d{4}(\d{4})/,"$1****$2")}Object.keys(r).forEach((function(e){return a["a"].filter(e,r[e])})),a["a"].prototype.$formatDate=a["a"].filter("formatDate"),a["a"].prototype.$hidePhone=a["a"].filter("hidePhone"),a["a"].prototype.$cdn=x["$cdn"],a["a"].prototype.$global=j,a["a"].config.productionTip=!1,new a["a"]({el:"#app",router:g,store:c["a"],render:function(e){return e(l)}})},"5c0b":function(e,t,n){"use strict";var r=n("9c0c"),a=n.n(r);a.a},7609:function(e,t,n){var r={"./env.development":"259b","./env.development.js":"259b","./env.production":"f1e0","./env.production.js":"f1e0","./env.staging":"e101","./env.staging.js":"e101"};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id="7609"},9536:function(e,t,n){},"9c0c":function(e,t,n){},be35:function(e,t,n){},e101:function(e,t){e.exports={title:"chat",baseUrl:"https://test.xxx.com",baseApi:"https://test.xxx.com/api",APPID:"xxx",APPSECRET:"xxx",$cdn:"https://www.sunniejs.cn/static"}},f121:function(e,t,n){var r="production",a=n("7609")("./env."+r);e.exports=a},f1e0:function(e,t){e.exports={title:"chat",baseUrl:"https://www.xxx.com/",baseApi:"https://www.xxx.com/api",APPID:"xxx",APPSECRET:"xxx",$cdn:"https://www.sunniejs.cn/static"}}},[[0,"runtime","chunk-vantUI","chunk-libs"]]]);